"use strict";(self.webpackChunkpcapplusplus_github_io=self.webpackChunkpcapplusplus_github_io||[]).push([[6194],{487:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"install/mingw","title":"Build on Windows (MinGW)","description":"Prerequisites for building with MinGW","source":"@site/versioned_docs/version-v22.05/install/mingw.mdx","sourceDirName":"install","slug":"/install/mingw","permalink":"/docs/v22.05/install/mingw","draft":false,"unlisted":false,"editUrl":"https://github.com/PcapPlusPlus/pcapplusplus.github.io/edit/master/versioned_docs/version-v22.05/install/mingw.mdx","tags":[],"version":"v22.05","frontMatter":{"title":"Build on Windows (MinGW)"},"sidebar":"docs","previous":{"title":"Build on Windows (VS)","permalink":"/docs/v22.05/install/vs"},"next":{"title":"Build for Android","permalink":"/docs/v22.05/install/android"}}');var l=i(4848),r=i(8453);const t={title:"Build on Windows (MinGW)"},o="Build From Source on Windows - MinGW32 / MinGW-w64",d={},a=[{value:"Prerequisites for building with MinGW",id:"prerequisites-for-building-with-mingw",level:2},{value:"If you prefer to install pthreads manually please follow these steps",id:"if-you-prefer-to-install-pthreads-manually-please-follow-these-steps",level:3},{value:"Prerequisites for building with MinGW-w64",id:"prerequisites-for-building-with-mingw-w64",level:2},{value:"Additional prerequisites",id:"additional-prerequisites",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Build the code",id:"build-the-code",level:2},{value:"Running tests",id:"running-tests",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"build-from-source-on-windows---mingw32--mingw-w64",children:"Build From Source on Windows - MinGW32 / MinGW-w64"})}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites-for-building-with-mingw",children:"Prerequisites for building with MinGW"}),"\n",(0,l.jsx)(n.p,{children:"In order to compile PcapPlusPlus on Windows using MinGW32 you need the following components:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["The fastest way I found for installing mingw32 was through this link: ",(0,l.jsx)(n.a,{href:"http://www.mingw.org/wiki/Getting_Started",children:"http://www.mingw.org/wiki/Getting_Started"})]}),"\n",(0,l.jsxs)(n.li,{children:["Download ",(0,l.jsx)(n.code,{children:"mingw-get-setup.exe"}),", run it and follow the instructions"]}),"\n",(0,l.jsxs)(n.li,{children:["By default the pthreads library is not installed so you need to ask to install it. It can be done during the installation process or afterwards with ",(0,l.jsx)(n.code,{children:"mingw-get.exe"})," (MinGW installation manager)"]}),"\n",(0,l.jsxs)(n.li,{children:["In the MinGW installation manager search for all packages containing ",(0,l.jsx)(n.code,{children:"pthreads"})," and mark them for installation. Make sure the ",(0,l.jsx)(n.code,{children:"pthreads-win32"})," version you install is ",(0,l.jsx)(n.strong,{children:"2.10"})," or later"]}),"\n",(0,l.jsxs)(n.li,{children:["Choose ",(0,l.jsx)(n.code,{children:"Installation->Update Catalogue"})]}),"\n"]}),"\n",(0,l.jsxs)(n.admonition,{title:"Notice",type:"caution",children:[(0,l.jsx)(n.p,{children:"There is a bug in MinGW32 that makes PcapPlusPlus build to fail. Here is how to fix it:"}),(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to the file: ",(0,l.jsx)(n.code,{children:"YOUR_MINGW_INSTALL_PATH\\MinGW\\include\\ptw32_errno.h"})]}),"\n",(0,l.jsxs)(n.li,{children:["Search for the line that has ",(0,l.jsx)(n.code,{children:"#include <winsock.h>"}),". You'll see a comment above this line saying this line is incompatible with any application which uses ",(0,l.jsx)(n.code,{children:"<winsock2.h>"})," (PcapPlusPlus is one of them)"]}),"\n",(0,l.jsxs)(n.li,{children:["Simply comment this line, like this: ",(0,l.jsx)(n.code,{children:"//# include <winsock.h>"})]}),"\n"]})]}),"\n",(0,l.jsx)(n.h3,{id:"if-you-prefer-to-install-pthreads-manually-please-follow-these-steps",children:"If you prefer to install pthreads manually please follow these steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Download ",(0,l.jsx)(n.a,{href:"http://ftp.ntua.gr/mirror/mingw/MinGW/Base/pthreads-w32/pthreads-w32-2.10-pre-20160821-1/pthreads-GC-w32-2.10-mingw32-pre-20160821-1-dev.tar.xz",children:"pthreads for MinGW"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Extract it with 7-Zip"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"7z.exe e pthreads-GC-w32-2.10-mingw32-pre-20160821-1-dev.tar.xz -oC:\\pthreads\n7z.exe x C:\\pthreads\\pthreads-GC-w32-2.10-mingw32-pre-20160821-1-dev.tar -oC:\\pthreads\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Copy the include files to MinGW folder:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"xcopy /Y C:\\pthreads\\include\\* C:\\MinGW\\include\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Copy the lib files to MinGW folder:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"xcopy /Y C:\\pthreads\\lib\\* C:\\MinGW\\lib\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites-for-building-with-mingw-w64",children:"Prerequisites for building with MinGW-w64"}),"\n",(0,l.jsx)(n.p,{children:"In order to compile PcapPlusPlus on Windows using MinGW-w64 you need the following components:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Download and run mingw-w64 installer from here: ",(0,l.jsx)(n.a,{href:"https://sourceforge.net/projects/mingw-w64/",children:"https://sourceforge.net/projects/mingw-w64/"})]}),"\n",(0,l.jsx)(n.li,{children:"Make sure the installation path doesn't contain spaces (otherwise PcapPlusPlus compilation may fail)"}),"\n",(0,l.jsxs)(n.li,{children:["Make sure to choose the i686 (32-bit) and POSIX threads (and not win32 threads) options. for example: ",(0,l.jsx)(n.code,{children:"i686-8.1.0-posix-dwarf-rt_v6-rev0"}),". PcapPlusPlus doesn't support MinGW-w64 64-bit (x86_64)"]}),"\n",(0,l.jsx)(n.li,{children:"Follow the instruction in the installation wizard"}),"\n",(0,l.jsxs)(n.li,{children:["Install ",(0,l.jsx)(n.code,{children:"MSYS2"}),"from here: ",(0,l.jsx)(n.a,{href:"https://www.msys2.org/",children:"https://www.msys2.org/"})]}),"\n",(0,l.jsxs)(n.li,{children:["Add the following folders to your ",(0,l.jsx)(n.code,{children:"PATH"})," environment variable:","\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["The MinGW-w64 folder that contains ",(0,l.jsx)(n.code,{children:"g++.exe"}),", ",(0,l.jsx)(n.code,{children:"mingw32-make"}),", etc. It should be under ",(0,l.jsx)(n.code,{children:"[MinGW-w64_install_folder]\\mingw32\\bin"}),", for example: ",(0,l.jsx)(n.code,{children:"C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0\\mingw32\\bin"})]}),"\n",(0,l.jsxs)(n.li,{children:["The MSYS2 ",(0,l.jsx)(n.code,{children:"usr\\bin"})," folder, for example: ",(0,l.jsx)(n.code,{children:"C:\\msys32\\usr\\bin"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"additional-prerequisites",children:"Additional prerequisites"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://www.winpcap.org/devel.htm",children:"WinPcap developer's pack"})," ",(0,l.jsx)(n.strong,{children:"OR"})," ",(0,l.jsx)(n.a,{href:"https://nmap.org/npcap/guide/npcap-devguide.html",children:"Npcap SDK"})," - containing the ",(0,l.jsx)(n.code,{children:"wpcap"})," library PcapPlusPlus is linking with plus relevant ",(0,l.jsx)(n.code,{children:"h"})," files.","\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["WinPcap developer's pack can be downloaded from here: ",(0,l.jsx)(n.a,{href:"https://www.winpcap.org/devel.htm",children:"https://www.winpcap.org/devel.htm"})]}),"\n",(0,l.jsxs)(n.li,{children:["Npcap SDK can be downloaded from here: ",(0,l.jsx)(n.a,{href:"https://nmap.org/npcap/#download",children:"https://nmap.org/npcap/#download"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"x64 is not supported",type:"danger",children:(0,l.jsxs)(n.p,{children:["Please notice that ",(0,l.jsx)(n.strong,{children:"x64"})," compilation is not supported (and will not work) on either MinGW32 nor MinGW-w64!"]})}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Run the ",(0,l.jsx)(n.code,{children:"configure-windows-mingw.bat"})," batch file from PcapPlusPlus main directory. The script creates a makefile ",(0,l.jsx)(n.code,{children:"mk\\PcapPlusPlus.mk"})," that contains paths for 3rd-party libraries being used to build PcapPlusPlus."]}),"\n",(0,l.jsx)(n.p,{children:"Ths script has two modes of operation:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Wizard mode - the script will walk you through the paths and parameters you need to provide"}),"\n",(0,l.jsx)(n.li,{children:"Params mode - all parameters are provided in the script command line"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["In wizard mode the script will ask you for MinGW location (for example: ",(0,l.jsx)(n.code,{children:"C:\\MinGW"})," for MinGW or ",(0,l.jsx)(n.code,{children:"C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0"})," for MinGW-w64) and also for WinPcap developer's pack / Npcap SDK location (for example: ",(0,l.jsx)(n.code,{children:"C:\\WpdPack"})," or ",(0,l.jsx)(n.code,{children:"C:\\Npcap-SDK"}),")."]}),"\n",(0,l.jsx)(n.p,{children:"Here is an example of running the script for MinGW32:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'C:\\PcapPlusPlus>configure-windows-mingw.bat\n\n******************************************\nPcapPlusPlus Windows configuration script\n******************************************\n\nMinGW32 or MinGW-w64 are required for compiling PcapPlusPlus. Please specify\nthe type you want to use (can be either "mingw32" or "mingw-w64")\n\nPlease specify mingw32 or mingw-w64: mingw32\n\n\nIf mingw32 is not installed, please download and install it\nmingw32 can be downloaded from: www.mingw.org/\n\nPlease specify mingw32 installed path (for example: C:\\MinGW or C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0): C:\\MinGW\n\n\nWinPcap or Npcap SDK is required for compiling PcapPlusPlus.\nFor downloading WinPcap SDK (developer\'s pack) please go to https://www.winpcap.org/devel.htm\nFor downloading Npcap SDK please go to https://nmap.org/npcap/#download\n\nPlease specify WinPcap/Npcap SDK path: C:\\WpdPack\n\nPcapPlusPlus configuration is complete. Files created (or modified): mk\\platform.mk, mk\\PcapPlusPlus.mk\n'})}),"\n",(0,l.jsx)(n.p,{children:"Here is another example of running the script for MinGW-w64:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'C:\\PcapPlusPlus>configure-windows-mingw.bat\n\n******************************************\nPcapPlusPlus Windows configuration script\n******************************************\n\nMinGW32 or MinGW-w64 are required for compiling PcapPlusPlus. Please specify\nthe type you want to use (can be either "mingw32" or "mingw-w64")\n\nPlease specify mingw32 or mingw-w64: mingw-w64\n\n\nIf mingw-w64 is not installed, please download and install it\nmingw-w64 can be downloaded from: sourceforge.net/projects/mingw-w64/\n\nPlease specify mingw-w64 installed path (for example: C:\\MinGW or C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0): C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0\n\n\nMSYS2 is required for compiling PcapPlusPlus.\nIf MSYS2 are not installed, please download and install it from: https://www.msys2.org/\n\nPlease specify MSYS2 installed path: C:\\msys64\n\n\nWinPcap or Npcap SDK is required for compiling PcapPlusPlus.\nFor downloading WinPcap SDK (developer\'s pack) please go to https://www.winpcap.org/devel.htm\nFor downloading Npcap SDK please go to https://nmap.org/npcap/#download\n\nPlease specify WinPcap/Npcap SDK path: C:\\Npcap-SDK\n\nPcapPlusPlus configuration is complete. Files created (or modified): mk\\platform.mk, mk\\PcapPlusPlus.mk\n\n'})}),"\n",(0,l.jsxs)(n.p,{children:["In params mode you need to provide these paths as script params. You can use the ",(0,l.jsx)(n.code,{children:"--help"})," switch to query these params:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'C:\\PcapPlusPlus>configure-windows-mingw.bat --help\n\n******************************************\nPcapPlusPlus Windows configuration script\n******************************************\n\n\nHelp documentation for configure-windows-mingw.bat\nThis script has 2 modes of operation:\n  1) Without any switches. In this case the script will guide you through using wizards\n  2) With switches, as described below\n\nBasic usage: configure-windows-mingw.bat [-h] MINGW_COMPILER -m MINGW_HOME_DIR -w PCAP_SDK_DIR [-s MSYS_HOME_DIR]\n\nThe following switches are recognized:\nMINGW_COMPILER       --The MinGW compiler to use. Can be either "mingw32" or "mingw-w64"\n-m|--mingw-home      --Set MinGW home directory (the folder that includes "bin", "lib" and "include" directories)\n-s|--msys-home       --Set MSYS2 home directory (must for mingw-w64, not must for mingw32)\n-w|--pcap-sdk        --Set WinPcap/Npcap SDK directory\n-h|--help            --Display this help message and exits. No further actions are performed\n'})}),"\n",(0,l.jsx)(n.p,{children:"For example (MinGW32):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"C:\\PcapPlusPlus>configure-windows-mingw.bat mingw32 --mingw-home C:\\MinGW --pcap-sdk C:\\Npcap-SDK\n\n******************************************\nPcapPlusPlus Windows configuration script\n******************************************\n\n\nPcapPlusPlus configuration is complete. Files created (or modified): mk\\platform.mk, mk\\PcapPlusPlus.mk\n\n"})}),"\n",(0,l.jsx)(n.p,{children:"Or (MinGW-w64):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"C:\\PcapPlusPlus>configure-windows-mingw.bat mingw-w64 --mingw-home C:\\i686-8.1.0-posix-dwarf-rt_v6-rev0 --msys-home C:\\msys64 --pcap-sdk C:\\WpdPack\n\n******************************************\nPcapPlusPlus Windows configuration script\n******************************************\n\n\nPcapPlusPlus configuration is complete. Files created (or modified): mk\\platform.mk, mk\\PcapPlusPlus.mk\n"})}),"\n",(0,l.jsx)(n.p,{children:"Here are the available switches:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Option"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"MINGW_COMPILER"})})}),(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:["MinGW compiler to use. Options are ",(0,l.jsx)(n.code,{children:"mingw32"})," or ",(0,l.jsx)(n.code,{children:"mingw-w64"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"-m"})})," , ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"--mingw-home"})})]}),(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:["MinGW home directory (the folder that includes ",(0,l.jsx)(n.code,{children:"bin"}),", ",(0,l.jsx)(n.code,{children:"lib"})," and ",(0,l.jsx)(n.code,{children:"include"})," directories)"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"-s"})})," , ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"--msys-home"})})]}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"MSYS or MSYS2 home directory. Required only for MinGW-w64"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"-w"})})," , ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"--pcap-sdk"})})]}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Path to WinPcap Developer Pack (WpdPack) OR Npcap SDK"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"-h"})})," , ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"--help"})})]}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Display the help message and exit. No further actions are performed"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"build-the-code",children:"Build the code"}),"\n",(0,l.jsx)(n.p,{children:"After running the config script, you're can safely build the code:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Run ",(0,l.jsx)(n.code,{children:"mingw32-make.exe all"})," from PcapPlusPlus main directory"]}),"\n",(0,l.jsx)(n.li,{children:"This should compile all libraries, unit-tests and examples"}),"\n",(0,l.jsxs)(n.li,{children:["To build the libraries only (without the unit-tests and examples) run ",(0,l.jsx)(n.code,{children:"mingw32-make.exe libs"})," instead of ",(0,l.jsx)(n.code,{children:"mingw32-make.exe all"})]}),"\n",(0,l.jsxs)(n.li,{children:["After compilation you can find the libraries, examples, header files and helpful makefiles under the ",(0,l.jsx)(n.code,{children:"Dist\\"})," directory"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"running-tests",children:"Running tests"}),"\n",(0,l.jsxs)(n.p,{children:["PcapPlusPlus contains a set of test-cases you can run to make sure that everything works correctly on your system. ",(0,l.jsx)(n.a,{href:"../tests",children:"This guide"})," contains detailed instructions on how to run them."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(6540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);